{% extends "newbase.html" %}
{% block title %}
{{room.name}} | {{restaurant.name}}
{% endblock %}
{% block head %}
    {% load staticfiles %}
    <script src="{% static "assets/js/shapes.js"%}" ></script>
{% endblock head %}

{% block pageHeading %}

    <h1>
        {{room.name}} <small>{{restaurant.name }}</small>
    </h1>
{% endblock %}

{% block side %}
  <div class="container-fluid">
    <div class="row">
        <div class="col-md-6">
             
            <button type="button" style="width:100%;" class="btn btn-default" onclick="createNewTableCircle()">
                Circle
            </button>
        </div>
        <div class="col-md-6">
             
            <button type="button" style="width:100%;" class="btn btn-default" onclick="createNewTableSquare()">
                Square
            </button>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-6">
             
            <button type="button" style="width:100%;" class="btn btn-default" onclick="createNewTableHRect()">
                HRect
            </button>
        </div>
        <div class="col-md-6">
             
            <button type="button" style="width:100%;" class="btn btn-default" onclick="createNewTableVRect()">
                VRect
            </button>
        </div>
    </div>
    <br>
    <div class="row">
        <form class="form-inline">
          <div class="form-group">
            <label for="textBoxName" style="color:#FFFFFF;">Name of Table</label>
            <input type="text" style="width:100%;" class="form-control" id="textBoxName" placeholder="Table">
          </div><br><br>
          <div class="form-group">
            <label for="textBoxType" style="color:#FFFFFF;">Shape of Table</label>
            <input type="text" style="width:100%;" class="form-control" id="textBoxType" placeholder="Shape">
          </div><br><br>
          <div class="form-group">
            <label for="textBoxX" style="color:#FFFFFF;">X Position</label>
            <input type="text" style="width:100%;" class="form-control" id="textBoxX" placeholder="X Position">
          </div><br><br>
          <div class="form-group">
            <label for="textBoxY" style="color:#FFFFFF;">Y Position</label>
            <input type="text" style="width:100%;" class="form-control" id="textBoxY" placeholder="Y Position">
          </div><br><br>
          <div class="form-group">
            <label for="textBoxSize" style="color:#FFFFFF;">Size of Table</label>
            <input type="text" style="width:100%;" class="form-control" id="textBoxSize" placeholder="Size">
          </div><br><br>
          <div class="form-group">
            <label for="textBoxRotation" style="color:#FFFFFF;">Rotation</label>
            <input type="text" style="width:100%;" class="form-control" id="textBoxRotation" placeholder="In Degrees" maxlength="3">
          </div>
        </form>
        <br>
            <button class="btn btn-success" id="buttonUpdate" style="width:100%;" onclick="updateTable()">Update</button>

    
</div>

{% endblock %}


{% block mainContent %}
    
    <div>
        <canvas id="canvasMain" width="1175" height="600" style="border: 1px solid #666666"></canvas>
    </div>

{% endblock %}

{% block script %}
    $( document ).ready(function() {
        tt=[];
        
        {% for t in tables %}
            tab=JSON.parse('{{t|safe}}');
            addTable(tab.name, parseInt(tab.xpos,10), parseInt(tab.ypos,10), tab.type, parseInt(tab.size,10), parseInt(tab.rotation,10), tab.id);
        {% endfor %}
        
        initCanvas();
        $('#buttonUpdate').click(function(){
            var senddata = "";
            tables.forEach(function(i,e){
            console.log(i.toJSON());
                senddata+=(i.toJSON()+"|");
            });
            $.ajax({
                type: "GET",
                url: "update/",
                dataType: 'text',
                contentType: 'application/json',
                success: function (msg) {
                   console.log(msg)
                },
                data:'data='+senddata,
            });
        });
    });


{% endblock %}



